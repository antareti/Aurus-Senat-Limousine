<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aurus Senat Limousine — игра на Pygame</title>
  <meta name="description" content="Aurus Senat Limousine — аркадная гонка на Pygame. Скачать, узнать управление, посмотреть скриншоты и исходники на GitHub." />
  <meta property="og:title" content="Aurus Senat Limousine — игра на Pygame" />
  <meta property="og:description" content="Скачай Windows-версию, смотри исходники и инструкции по запуску." />
  <meta property="og:type" content="website" />
  <link rel="icon" href="favicon.ico" />
  <style>
    :root {
      --bg: #0b0c10;
      --card: #111217;
      --muted: #98a2b3;
      --brand: #ffd166;
      --brand-2: #00bcd4;
      --text: #e6e7eb;
      --border: #24262f;
      --accent: #20222b;
    }
    * { box-sizing: border-box; }
    html, body { margin:0; padding:0; background:var(--bg); color:var(--text); font-family:system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    a { color: inherit; text-decoration: none; }
    .container { max-width: 1100px; margin: 0 auto; padding: 24px; }

    nav { position: sticky; top: 0; z-index: 50; backdrop-filter: blur(8px); background: linear-gradient(180deg, rgba(11,12,16,0.9), rgba(11,12,16,0.6) 70%, rgba(11,12,16,0)); border-bottom: 1px solid var(--border); }
    .nav-wrap { display: flex; align-items: center; justify-content: space-between; gap: 16px; }
    .brand { display: flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: .2px; }
    .brand .logo { width: 28px; height: 28px; border-radius: 50%; background: radial-gradient(60% 60% at 40% 40%, var(--brand), #e5a100 60%, #8c6b00 100%); box-shadow: 0 0 16px rgba(255, 209, 102, .4); }
    .nav-links { display: flex; flex-wrap: wrap; gap: 18px; font-size: 15px; }
    .nav-links a { color: var(--muted); }
    .nav-links a:hover { color: var(--text); }

    .hero { padding: 72px 0 48px; position: relative; overflow: hidden; }
    .hero-bg { position: absolute; inset: 0; background: radial-gradient(80% 60% at 70% 10%, rgba(0,188,212,.25), transparent 60%), radial-gradient(60% 40% at 20% 0%, rgba(255,209,102,.2), transparent 50%); pointer-events: none; }
    .hero .content { display: grid; grid-template-columns: 1.1fr .9fr; gap: 28px; align-items: center; }
    @media (max-width: 900px) { .hero .content { grid-template-columns: 1fr; } }
    .title { font-size: clamp(28px, 4vw, 48px); line-height: 1.05; margin: 6px 0 12px; }
    .subtitle { color: var(--muted); font-size: clamp(15px, 2.2vw, 18px); }
    .btns { display: flex; flex-wrap: wrap; gap: 12px; margin-top: 20px; }
    .btn { padding: 12px 16px; border: 1px solid var(--border); background: var(--accent); border-radius: 14px; font-weight: 600; display: inline-flex; align-items: center; gap: 10px; transition: transform .06s ease, box-shadow .2s ease; }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 6px 20px rgba(0,0,0,.3); }
    .btn.primary { background: linear-gradient(180deg, #ffd166, #e5a100); color: #171717; border:0; }
    .btn.primary::before { content: "⬇"; margin-right: 8px; }
    .btn.ghost { background: transparent; }
    .btn.small { padding: 8px 12px; border-radius: 10px; font-weight: 600; }

    section { padding: 36px 0 10px; }
    .card { background: linear-gradient(180deg, var(--card), #0e0f14 120%); border:1px solid var(--border); border-radius:18px; padding:18px; }
    .grid { display:grid; gap:18px; }
    .grid.two { grid-template-columns: repeat(2,1fr); }
    .grid.three { grid-template-columns: repeat(3,1fr); }
    @media (max-width:900px) { .grid.two,.grid.three{grid-template-columns:1fr;} }
    h2 { font-size:22px; margin:8px 0 14px; }
    p { color:#cfd3da; line-height:1.6; margin:8px 0; }
    ul { margin:8px 0 0 18px; color:#cfd3da; }
    li { margin:6px 0; }
    .shot { aspect-ratio:16/9; border-radius:14px; background:#0a0b0f; border:1px dashed #303240; display:grid; place-items:center; color:var(--muted); font-size:14px; }
    .muted { color:var(--muted); font-size:14px; }
    footer { padding:28px 0 60px; color:var(--muted); border-top:1px solid var(--border); margin-top:28px; }
    .kbd { background:#1d2029; border:1px solid #2a2d38; border-bottom-width:3px; border-radius:7px; padding:2px 6px; font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:13px; }
    code { background:#12141a; padding:2px 6px; border-radius:6px; border:1px solid #242734; }
  </style>
</head>
<body>
  <nav>
    <div class="container nav-wrap">
      <div class="brand"><span class="logo"></span> Aurus Senat Limousine</div>
      <div class="nav-links">
        <a href="#about">Об игре</a>
        <a href="#features">Особенности</a>
        <a href="#controls">Управление</a>
        <a href="#download">Скачать</a>
        <a href="#source">Исходники</a>
        <a href="#faq">FAQ</a>
        <a href="#guestbook">Гостевая книга</a>
      </div>
    </div>
  </nav>

  <header class="hero">
    <div class="hero-bg" aria-hidden="true"></div>
    <div class="container content">
      <div>
        <h1 class="title">Аркадная гонка на Pygame — <br/>Aurus Senat Limousine</h1>
        <p class="subtitle">Уворачивайся от потока, обгоняй и набирай очки. Минималистичный "псевдо-3D" вид сверху, аккуратный HUD и бодрый саундтрек. </p>
        <div class="btns">
          <a class="btn primary" id="btn-win" href="https://drive.google.com/file/d/1zXMGt_CcIJy8A__3-6LZ9e0CkA6IBq_y/view?usp=sharing" target="_blank">Скачать для Windows</a>
          <a class="btn" href="#download">Другие способы</a>
          <a class="btn ghost" id="btn-repo" href="https://github.com/REPO_OWNER/REPO_NAME" target="_blank" rel="noopener">★ Репозиторий</a>
        </div>
        <p class="muted" style="margin-top:10px">Поддерживаются Windows 10/11 x64. Веб-версия планируется.</p>
      </div>
      <div class="card">
        <div class="shot">
          <video autoplay loop muted playsinline style="width:100%; height:100%; object-fit:cover; border-radius:14px;">
            <source src="1.mp4" type="video/mp4">
            Ваш браузер не поддерживает видео.
          </video>
        </div>
        <p class="muted" style="margin-top:8px">Файл <code>1.mp4</code> должен лежать в корне сайта рядом с <code>index.html</code>.</p>
      </div>
    </div>
  </header>

  <main class="container">
    <section id="about" class="grid two">
      <div class="card">
        <h2>Об игре</h2>
        <p>Езжай по прямой, маневрируй в полосе и обгоняй встречные авто. Каждый успешно «пропущенный» автомобиль — +1 очко. Столкнулся — звук удара, скорость обнуляется, а после — экран окончания с твоим счётом.</p>
        <p class="muted">Игра написана на <strong>Pygame</strong>. Окна без рамок, плавные линии разметки и счётчик «Обогнано» в HUD.</p>
      </div>
      <div class="card">
        <h2>Что внутри</h2>
        <ul>
          <li>Фиксированная дорога шириной 300px по центру экрана 1600×900</li>
          <li>Движущаяся разметка (скорость линий <code>LINE_SPEED=5</code>)</li>
          <li>Спрайты машин: игрок (<code>car.png</code>) и трафик (<code>2.png</code>)</li>
          <li>Звуки: фон (<code>bg_music.wav</code>) и столкновение (<code>collision.wav</code>)</li>
        </ul>
      </div>
    </section>

    <!-- Добавленный раздел "Особенности игры" -->
    <section id="features" class="grid two">
      <div class="card">
        <h2>Особенности игры</h2>
        <ul>
          <li><strong>Аркадный геймплей:</strong> Простая, но захватывающая гонка на время, где главная цель — выжить и набрать как можно больше очков.</li>
          <li><strong>"Псевдо-3D" вид:</strong> Уникальный визуальный стиль, создающий ощущение объема, несмотря на двумерную графику.</li>
          <li><strong>Динамический саундтрек:</strong> Музыка, которая сопровождает вас на протяжении всей гонки, и реалистичные звуки столкновений.</li>
          <li><strong>Простое управление:</strong> Используйте всего несколько клавиш, чтобы полностью контролировать свой автомобиль.</li>
        </ul>
      </div>
      <div class="card">
        <h2>Очки и механика</h2>
        <p>Ваш счёт — это количество успешно обогнанных автомобилей. Чтобы добиться успеха, нужно быстро реагировать и избегать столкновений. Каждая авария снижает скорость и обнуляет очки, что делает игру по-настоящему сложной.</p>
      </div>
    </section>

    <section id="controls" class="grid three">
      <div class="card">
        <h2>Управление</h2>
        <ul>
          <li><span class="kbd">←</span>/<span class="kbd">→</span> — повороты</li>
          <li><span class="kbd">↑</span> — газ, <span class="kbd">↓</span> — тормоз</li>
          <li><span class="kbd">Esc</span> — выйти</li>
        </ul>
      </div>
      <div class="card">
        <h2>Цель</h2>
        <p>Держись в пределах дороги и набирай максимальное число обгонов. Столкновения замедляют и мешают ставить рекорд.</p>
      </div>
      <div class="card">
        <h2>Системные требования</h2>
        <ul>
          <li>Windows 10/11 x64 или Python 3.10+</li>
          <li>GPU не обязателен, достаточно встроенной графики</li>
          <li>Звук включён 🙂</li>
        </ul>
      </div>
    </section>

    <!-- Блок с реальными скриншотами -->
    <section id="screenshots" class="grid three">
      <div class="card">
        <h2>Скриншот 1</h2>
        <div class="shot">
          <img src="3.png" alt="Скриншот 1" style="width:100%; height:100%; object-fit:cover; border-radius:14px;">
        </div>
      </div>
      <div class="card">
        <h2>Скриншот 2</h2>
        <div class="shot">
          <img src="4.png" alt="Скриншот 2" style="width:100%; height:100%; object-fit:cover; border-radius:14px;">
        </div>
      </div>
      <div class="card">
        <h2>Скриншот 3</h2>
        <div class="shot">
          <img src="5.png" alt="Скриншот 3" style="width:100%; height:100%; object-fit:cover; border-radius:14px;">
        </div>
      </div>
    </section>

    <!-- Добавленный раздел "Вопросы и ответы" -->
    <section id="faq" class="grid two">
      <div class="card">
        <h2>Вопросы и ответы</h2>
        <p><strong>Нужна ли мощная видеокарта?</strong></p>
        <p>Нет, игра не требовательна к ресурсам. Она будет работать даже на встроенной графике.</p>
        <p><strong>Можно ли играть на macOS или Linux?</strong></p>
        <p>На данный момент игра доступна только для Windows. Однако вы можете запустить её из исходников на Python, если у вас установлен Pygame.</p>
      </div>
      <div class="card">
        <p><strong>Как запустить игру?</strong></p>
        <p>Проще всего — скачать готовый RAR-архив и распаковать его. Если вы хотите запустить из исходников, следуйте инструкциям в разделе "Скачать и запустить".</p>
        <p><strong>Будет ли веб-версия?</strong></p>
        <p>Веб-версия находится в планах на будущее. Следите за обновлениями в репозитории.</p>
      </div>
    </section>

    <section id="download" class="grid two">
      <div class="card">
        <h2>Скачать и запустить</h2>
        <p><strong>Вариант 1: готовый RAR (Windows)</strong></p>
        <p>Скачайте WINRAR по кнопке «Скачать для Windows» вверху. Запуск от имени администратора не требуется.</p>
        <p><strong>Вариант 2: запуск из исходников</strong></p>
<pre><code>python -m venv .venv
.venv\Scripts\activate
pip install pygame
python main.py
</code></pre>
        <p class="muted">Файлы <code>car.png</code>, <code>2.png</code>, <code>collision.wav</code>, <code>bg_music.wav</code> должны лежать рядом с <code>main.py</code>.</p>
      </div>
      <div class="card">
        <h2>Структура проекта</h2>
<pre><code>📁 aurus-senat-limousine/
  ├─ index.html
  ├─ main.py
  ├─ car.png
  ├─ 2.png
  ├─ collision.wav
  ├─ bg_music.wav
  └─ assets/
      └─ 10.png
</code></pre>
        <p class="muted">Имена ассетов в игре уже зашиты. Переименовывать не нужно.</p>
      </div>
    </section>

    <section id="source" class="grid two">
      <div class="card">
        <h2>Исходный код</h2>
        <p>Репозиторий с кодом и релизами: <a id="repo-link" href="https://github.com/REPO_OWNER/REPO_NAME" target="_blank" rel="noopener">github.com/REPO_OWNER/REPO_NAME</a></p>
        <p class="muted">Поддержка браузерной версии через WebAssembly планируется позднее.</p>
      </div>
      <div class="card">
        <h2>Лицензия и авторство</h2>
        <p>© <span id="year"></span> HACKPACK_games. Код Pygame — лицензия LGPL. Сторонние звуки/изображения — проверьте их лицензионные условия.</p>
      </div>
    </section>
    
    <hr style="margin-top: 40px; border-color: var(--border);">
    
    <!-- Добавленный раздел "Гостевая книга" -->
    <section id="guestbook" class="container" style="padding: 0;">
      <h2 style="text-align: center; margin-bottom: 24px;">Гостевая книга</h2>
      <div class="card" style="margin-bottom: 24px;">
        <p>Вы вошли как: <code id="user-id">Гость</code></p>
      </div>
      <form id="comment-form" class="card" style="display: flex; gap: 12px; margin-bottom: 24px; align-items: flex-end;">
        <div style="flex-grow: 1;">
          <p style="margin-bottom: 8px;">Ваш комментарий:</p>
          <textarea id="comment-text" class="card" style="width: 100%; min-height: 80px; resize: vertical; padding: 12px; font-size: 16px; border: 1px solid var(--border); background-color: var(--bg);"></textarea>
        </div>
        <button type="submit" class="btn primary">Отправить</button>
      </form>
      <div id="comments-container" style="display: flex; flex-direction: column; gap: 16px;">
        <!-- Комментарии будут загружаться здесь -->
        <p style="text-align: center; color: var(--muted);" id="loading-comments">Загрузка комментариев...</p>
      </div>
    </section>

  </main>

  <footer>
    <div class="container">
      Сделано с ❤️ и Pygame. Если страница выглядела приятно — поставьте ★ в репозитории.
    </div>
  </footer>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, doc, addDoc, onSnapshot, collection, query, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
    import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
    
    // Глобальные переменные, предоставленные Canvas
    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
    const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

    // Инициализация Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);
    setLogLevel('Debug');

    // Элементы DOM
    const commentForm = document.getElementById('comment-form');
    const commentTextarea = document.getElementById('comment-text');
    const commentsContainer = document.getElementById('comments-container');
    const userIdDisplay = document.getElementById('user-id');
    const loadingMessage = document.getElementById('loading-comments');

    let userId = null;

    // Аутентификация пользователя и загрузка комментариев
    async function authenticateAndLoadComments() {
        try {
            if (initialAuthToken) {
                const userCredential = await signInWithCustomToken(auth, initialAuthToken);
                userId = userCredential.user.uid;
            } else {
                const userCredential = await signInAnonymously(auth);
                userId = userCredential.user.uid;
            }
            userIdDisplay.textContent = userId;

            // Теперь, когда пользователь аутентифицирован, можно загружать комментарии
            if (userId) {
                const q = query(collection(db, `/artifacts/${appId}/public/data/guestbook`));
                onSnapshot(q, (querySnapshot) => {
                    const comments = [];
                    querySnapshot.forEach((doc) => {
                        const data = doc.data();
                        comments.push(data);
                    });

                    // Сортировка по времени, так как onSnapshot не гарантирует порядок
                    comments.sort((a, b) => a.timestamp?.seconds - b.timestamp?.seconds);

                    commentsContainer.innerHTML = '';
                    if (comments.length === 0) {
                        commentsContainer.innerHTML = '<p style="text-align: center; color: var(--muted);">Пока нет комментариев. Оставьте первый!</p>';
                    } else {
                        comments.forEach((comment) => {
                            const commentElement = document.createElement('div');
                            commentElement.className = 'card';
                            commentElement.innerHTML = `
                                <p style="margin: 0; font-weight: 600;">${comment.authorId.substring(0, 8)}...<span style="color: var(--muted); font-size: 12px; font-weight: normal; margin-left: 8px;">${comment.timestamp ? new Date(comment.timestamp.seconds * 1000).toLocaleString('ru-RU') : 'сейчас'}</span></p>
                                <p style="margin: 8px 0 0; line-height: 1.5; word-wrap: break-word;">${comment.text}</p>
                            `;
                            commentsContainer.appendChild(commentElement);
                        });
                    }
                }, (error) => {
                    console.error("Ошибка при получении комментариев: ", error);
                    commentsContainer.innerHTML = '<p style="text-align: center; color: var(--muted);">Не удалось загрузить комментарии. Попробуйте обновить страницу.</p>';
                });
            }
        } catch (error) {
            console.error("Ошибка аутентификации или загрузки комментариев:", error);
            userIdDisplay.textContent = 'Ошибка';
            commentsContainer.innerHTML = '<p style="text-align: center; color: var(--muted);">Не удалось загрузить комментарии. Проверьте консоль для получения более подробной информации.</p>';
        }
    }

    authenticateAndLoadComments();

    // Отправка комментария
    commentForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const comment = commentTextarea.value.trim();
        if (comment === "" || !userId) {
            console.error("Комментарий не может быть пустым или пользователь не аутентифицирован.");
            return;
        }

        try {
            await addDoc(collection(db, `/artifacts/${appId}/public/data/guestbook`), {
                authorId: userId,
                text: comment,
                timestamp: serverTimestamp()
            });
            commentTextarea.value = '';
        } catch (e) {
            console.error("Ошибка при добавлении документа: ", e);
        }
    });

    // Оригинальный скрипт для года и репозитория
    document.getElementById('year').textContent = new Date().getFullYear();
    try {
      const m = location.hostname.endsWith('github.io') ? location.pathname.split('/').filter(Boolean) : null;
      if (m && m.length) {
        const owner = location.hostname.split('.')[0];
        const repo = m[0];
        const repoUrl = `https://github.com/${owner}/${repo}`;
        document.getElementById('repo-link').href = repoUrl;
        document.getElementById('repo-link').textContent = `${owner}/${repo}`;
        document.getElementById('btn-repo').href = repoUrl;
      }
    } catch(_){}
  </script>
</body>
</html>
